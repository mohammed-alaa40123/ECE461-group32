service: my-api-service

frameworkVersion: '4'

plugins:
  - serverless-offline

provider:
  name: aws
  runtime: nodejs18.x
  region: us-east-1
  environment:
    DB_HOST: ${env:RDS_HOST}
    DB_PORT: ${env:RDS_PORT}
    DB_NAME: ${env:RDS_DATABASE}
    DB_USER: ${env:RDS_USER}
    DB_PASSWORD: ${env:RDS_PASSWORD}
    GITHUB_TOKEN: ${env:GITHUB_TOKEN}

 

functions:
  api:
    handler: index.handler
    timeout: 20
    events:
      - http:
          path: authenticate
          method: PUT
      - http:
          path: packages
          method: POST
      - http:
          path: reset
          method: DELETE
      - http:
          path: package/byRegEx
          method: POST
      - http:
          path: package/byName/{name}
          method: GET
      - http:
          path: package
          method: POST
      - http:
          path: package/{id}/rate
          method: GET
      - http:
          path: package/{id}/cost
          method: GET
      - http:
          path: package/{id}
          method: GET
      - http:
          path: package/{id}
          method: PUT
      - http:
          path: package/{id}
          method: DELETE
      - http:
          path: tracks
          method: GET
