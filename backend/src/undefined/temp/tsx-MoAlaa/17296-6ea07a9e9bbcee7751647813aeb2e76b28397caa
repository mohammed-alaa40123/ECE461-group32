{"code":"(()=>{\n\"use strict\";var __create=Object.create;var __defProp=Object.defineProperty;var __getOwnPropDesc=Object.getOwnPropertyDescriptor;var __getOwnPropNames=Object.getOwnPropertyNames;var __getProtoOf=Object.getPrototypeOf;var __hasOwnProp=Object.prototype.hasOwnProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});var __export=(target,all)=>{for(var name in all)__defProp(target,name,{get:all[name],enumerable:true})};var __copyProps=(to,from,except,desc)=>{if(from&&typeof from===\"object\"||typeof from===\"function\"){for(let key of __getOwnPropNames(from))if(!__hasOwnProp.call(to,key)&&key!==except)__defProp(to,key,{get:()=>from[key],enumerable:!(desc=__getOwnPropDesc(from,key))||desc.enumerable})}return to};var __toESM=(mod,isNodeMode,target)=>(target=mod!=null?__create(__getProtoOf(mod)):{},__copyProps(isNodeMode||!mod||!mod.__esModule?__defProp(target,\"default\",{value:mod,enumerable:true}):target,mod));var __toCommonJS=mod=>__copyProps(__defProp({},\"__esModule\",{value:true}),mod);var processURL_exports={};__export(processURL_exports,{getGithubRepo:()=>getGithubRepo,getGithubRepoInfoFromUrl:()=>getGithubRepoInfoFromUrl,processURLs:()=>processURLs});module.exports=__toCommonJS(processURL_exports);var import_promises=__toESM(require(\"fs/promises\"));var import_logger=require(\"./logger\");var import_util=require(\"./util\");const logger=(0,import_logger.getLogger)();async function getGithubRepo(url){const{default:fetch}=await import(\"node-fetch\").then(n=>{const e=\"default\";return n[e]&&typeof n[e]==\"object\"&&\"__esModule\"in n[e]?n[e]:n});const trimmedUrl=url.trim();const npmRegex=/npmjs\\.com\\/package\\/(?<packageName>[^/]+)/;const githubRegex=/github\\.com\\/(?<owner>[^/]+)\\/(?<packageName>[^/]+)/;if(trimmedUrl.includes(\"npmjs.com\")){return handleNpmUrl(trimmedUrl,npmRegex,githubRegex)}else if(trimmedUrl.includes(\"github.com\")){return handleGithubUrl(trimmedUrl,githubRegex)}else{logger.info(\"Invalid URL\");return null}}__name(getGithubRepo,\"getGithubRepo\");async function handleNpmUrl(url,npmRegex,githubRegex){logger.info(\"Handling NPM URL\");const match=url.match(npmRegex);if(!match?.groups?.packageName)return null;const packageName=match.groups.packageName;try{const repoURL=await getRepoUrlFromNpm(packageName,githubRegex);if(repoURL?.groups){logger.info(`RepoURL: ${repoURL.input}`);logger.info(`Owner: ${repoURL.groups.owner}, Package: ${repoURL.groups.packageName}`);return{packageName:repoURL.groups.packageName,owner:repoURL.groups.owner}}}catch(error){logger.info(`Error fetching NPM package: ${error}`)}return null}__name(handleNpmUrl,\"handleNpmUrl\");async function getRepoUrlFromNpm(packageName,githubRegex){const fetch=(await import(\"node-fetch\").then(n=>{const e=\"default\";return n[e]&&typeof n[e]==\"object\"&&\"__esModule\"in n[e]?n[e]:n})).default;const response=await fetch(`https://registry.npmjs.org/${packageName}`);const data=await response.json();if(typeof data!==\"object\"||data===null||!(\"repository\"in data)||typeof data.repository.url!==\"string\"){throw new Error(\"Invalid data format\")}let repoURL=data.repository.url;repoURL=repoURL.replace(/^git\\+/,\"\").replace(/\\.git$/,\"\");return repoURL.match(githubRegex)}__name(getRepoUrlFromNpm,\"getRepoUrlFromNpm\");function handleGithubUrl(url,githubRegex){logger.info(\"Handling GitHub URL\");const match=url.match(githubRegex);if(match?.groups){return{packageName:match.groups.packageName,owner:match.groups.owner}}logger.info(\"Invalid GitHub URL\");return null}__name(handleGithubUrl,\"handleGithubUrl\");async function processURLs(filePath){if(!(0,import_util.isValidFilePath)(filePath)){logger.info(\"Invalid file path\");return[]}let fileContent;try{fileContent=await import_promises.default.readFile(filePath,\"utf-8\")}catch(error){logger.info(`Error reading file: ${error}`);return[]}if(!fileContent){logger.info(\"Empty file\");return[]}const urls=fileContent.trim().split(\"\\n\");const results=[];for(const url of urls){logger.info(`Working with URL: ${url}`);const repo=await getGithubRepo(url);if(!repo){logger.info(\"Invalid URL\");continue}results.push({...repo,url})}logger.info(`Results: ${JSON.stringify(results)}`);return results}__name(processURLs,\"processURLs\");async function getGithubRepoInfoFromUrl(url){const repoInfo=await getGithubRepo(url);if(repoInfo){return{url,owner:repoInfo.owner,repo:repoInfo.packageName}}return null}__name(getGithubRepoInfoFromUrl,\"getGithubRepoInfoFromUrl\");0&&(module.exports={getGithubRepo,getGithubRepoInfoFromUrl,processURLs});\n})()\n","warnings":[],"map":{"version":3,"mappings":"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","names":["fs"],"ignoreList":[],"sources":["D:\\Purdue\\s1\\46100\\local\\ECE461-group32\\backend\\src\\rating\\processURL.ts"],"sourcesContent":[null]}}