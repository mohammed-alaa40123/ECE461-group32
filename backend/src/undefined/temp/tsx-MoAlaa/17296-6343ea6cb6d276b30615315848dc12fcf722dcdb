{"code":"(()=>{\n\"use strict\";var __create=Object.create;var __defProp=Object.defineProperty;var __getOwnPropDesc=Object.getOwnPropertyDescriptor;var __getOwnPropNames=Object.getOwnPropertyNames;var __getProtoOf=Object.getPrototypeOf;var __hasOwnProp=Object.prototype.hasOwnProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});var __export=(target,all)=>{for(var name in all)__defProp(target,name,{get:all[name],enumerable:true})};var __copyProps=(to,from,except,desc)=>{if(from&&typeof from===\"object\"||typeof from===\"function\"){for(let key of __getOwnPropNames(from))if(!__hasOwnProp.call(to,key)&&key!==except)__defProp(to,key,{get:()=>from[key],enumerable:!(desc=__getOwnPropDesc(from,key))||desc.enumerable})}return to};var __toESM=(mod,isNodeMode,target)=>(target=mod!=null?__create(__getProtoOf(mod)):{},__copyProps(isNodeMode||!mod||!mod.__esModule?__defProp(target,\"default\",{value:mod,enumerable:true}):target,mod));var __toCommonJS=mod=>__copyProps(__defProp({},\"__esModule\",{value:true}),mod);var handlers_exports={};__export(handlers_exports,{handleAuthenticate:()=>handleAuthenticate,handleCreatePackage:()=>handleCreatePackage,handleDeletePackage:()=>handleDeletePackage,handleGetPackageCost:()=>handleGetPackageCost,handleGetPackageHistoryByName:()=>handleGetPackageHistoryByName,handleGetPackageRating:()=>handleGetPackageRating,handleGetTracks:()=>handleGetTracks,handleListPackages:()=>handleListPackages,handleResetRegistry:()=>handleResetRegistry,handleRetrievePackage:()=>handleRetrievePackage,handleSearchPackagesByRegEx:()=>handleSearchPackagesByRegEx,handleUpdatePackage:()=>handleUpdatePackage});module.exports=__toCommonJS(handlers_exports);var import_dbService=__toESM(require(\"../services/dbService\"));var import_s3Service=require(\"../services/s3Service\");var import_response=require(\"../utils/response\");var import_auth=require(\"../utils/auth\");var import_handlerhelper=require(\"../handlerhelper\");var import_logger=require(\"../rating/logger\");var import_adm_zip=__toESM(require(\"adm-zip\"));var import_jsonwebtoken=__toESM(require(\"jsonwebtoken\"));var import_bcrypt=__toESM(require(\"bcrypt\"));const logger=(0,import_logger.getLogger)();const handleAuthenticate=__name(async body=>{const{User,Secret}=JSON.parse(body);const{name,isAdmin}=User;const{password}=Secret;if(!name||typeof isAdmin!==\"boolean\"||!password){return(0,import_response.sendResponse)(400,{message:\"Missing fields in AuthenticationRequest\"})}try{const user=await(0,import_dbService.getUserByName)(name);if(!user){return(0,import_response.sendResponse)(401,{message:\"Invalid user or password.\"})}const isMatch=await import_bcrypt.default.compare(password,user.password_hash);if(!isMatch){return(0,import_response.sendResponse)(401,{message:\"Invalid user or password.\"})}const token=import_jsonwebtoken.default.sign({sub:user.id,name:user.name,isAdmin:user.isAdmin},process.env.JWT_SECRET,{expiresIn:process.env.JWT_EXPIRES_IN||\"1h\"});return(0,import_response.sendResponse)(200,{token:`bearer ${token}`})}catch(error){console.error(\"Authentication Error:\",error);return(0,import_response.sendResponse)(500,{message:\"Internal server error.\"})}},\"handleAuthenticate\");const handleCreatePackage=__name(async(body,headers)=>{const fetch=(await import(\"node-fetch\").then(n=>{const e=\"default\";return n[e]&&typeof n[e]==\"object\"&&\"__esModule\"in n[e]?n[e]:n})).default;let user={sub:5445,name:\"admin\",isAdmin:true,iat:545,exp:45};const packageData=JSON.parse(body);const{metadata,data}=packageData;const pkgName=metadata.Name;const pkgVersion=metadata.Version;const pkgeId=(0,import_handlerhelper.generatePackageId)(pkgName,pkgVersion);if(!metadata||!metadata.Name||!metadata.Version||!metadata.ID){return(0,import_response.sendResponse)(400,{message:\"Missing required package metadata fields.\"})}if(data.Content&&data.URL||!data.Content&&!data.URL){return(0,import_response.sendResponse)(400,{message:\"Either Content or URL must be set, but not both.\"})}try{let info;if(data.Content){logger.info(\"createPackage request via zip upload\");const base64Data=data.Content;if(!base64Data){logger.debug(\"Invalid base64-encoded data\");return(0,import_response.sendResponse)(400,{error:\"Invalid base64-encoded data\"})}const base64Buffer=Buffer.from(atob(base64Data),\"binary\");const zip=new import_adm_zip.default(base64Buffer);const zipEntries=zip.getEntries();let packageJSON=null;let extractedPackageJson;zipEntries.forEach(entry=>{const entryPathParts=entry.entryName.split(\"/\");console.log(entryPathParts);if(entryPathParts.length===2&&entryPathParts[1]===\"package.json\"){packageJSON=entry.getData().toString(\"utf8\")}});if(packageJSON==null){console.log(\"Invalid package creation request: No package.json found in zip\");return(0,import_response.sendResponse)(400,{error:\"Invalid package creation request: No package.json found in zip\"})}else{extractedPackageJson=JSON.parse(packageJSON);logger.console(`repo url: ${extractedPackageJson?.repository?.url}, name: ${extractedPackageJson.name}, version: ${extractedPackageJson.version}`);if(!extractedPackageJson?.repository?.url||!extractedPackageJson.name||!extractedPackageJson.version){return(0,import_response.sendResponse)(400,{error:\"Invalid package creation request: package.json must contain repository url, package name, and version\"})}}const repoUrl=extractedPackageJson?.repository?.url;info=await(0,import_handlerhelper.metricCalcFromUrlUsingNetScore)(repoUrl);console.log(\"info\",info);if(!info){console.error(\"No package info returned from URL:\",repoUrl);return(0,import_response.sendResponse)(400,{error:\"Invalid package creation request: Could not get package info from URL\"})}info.ID=pkgeId;info.NAME=extractedPackageJson.name;info.VERSION=extractedPackageJson.version;info.URL=repoUrl;if(info.NET_SCORE<.5){logger.console(\"Invalid package creation request: Package cannot be uploaded due to disqualifying rating.\");return(0,import_response.sendResponse)(424,{error:\"Invalid package creation request: Package cannot be uploaded due to disqualifying rating.\"})}}else if(data.URL){logger.console(`createPackage request via public ingest:${data.URL}`);info=await(0,import_handlerhelper.metricCalcFromUrlUsingNetScore)(data.URL);if(!info){console.log(\"info\",info);console.error(\"No package info returned from URL:\",data.URL);return(0,import_response.sendResponse)(400,{error:\"Invalid package creation request: Could not get package info from URL\"})}info.ID=pkgeId;if(info.NET_SCORE<.5){logger.console(\"Invalid package creation request: Package cannot be uploaded due to disqualifying rating.\");return(0,import_response.sendResponse)(424,{error:\"Invalid package creation request: Package cannot be uploaded due to disqualifying rating.\"})}const response=await fetch(`https://api.github.com/repos/${info.OWNER}/${info.NAME}/zipball/HEAD`,{headers:{Authorization:process.env.GITHUB_TOKEN||\"\",Accept:\"application/vnd.github.v3+json\"}});if(!response.ok){logger.console(\"Invalid package creation request: Could not get GitHub url for zip package download\");return(0,import_response.sendResponse)(400,{error:\"Invalid package creation request: Could not get GitHub url\"})}const zipBuffer=Buffer.from(await response.arrayBuffer())}else{logger.console(\"Invalid package creation request: Bad set of Content and URL\");return(0,import_response.sendResponse)(400,{error:\"Invalid package creation request: Bad set of Content and URL\"})}const createdPackage=await(0,import_dbService.createPackage)(metadata,data);if(data.Content){await(0,import_s3Service.uploadPackageContent)(metadata.ID,data.Content)}const historyInsert=`\n      INSERT INTO package_history (package_id, user_id, action)\n      VALUES ($1, $2, $3)\n    `;await import_dbService.default.query(historyInsert,[metadata.ID,user.sub,\"CREATE\"]);return(0,import_response.sendResponse)(201,createdPackage)}catch(error){console.error(\"Create Package Error:\",error);if(error.code===\"23505\"){return(0,import_response.sendResponse)(409,{message:\"Package exists already.\"})}return(0,import_response.sendResponse)(500,{message:\"Internal server error.\"})}},\"handleCreatePackage\");const handleRetrievePackage=__name(async(id,headers)=>{console.log(\"id\",id);let user;try{user=(0,import_auth.authenticate)(headers)}catch(err){return(0,import_response.sendResponse)(err.statusCode,{message:err.message})}try{const queryText=\"SELECT * FROM packages WHERE id = $1\";const res=await import_dbService.default.query(queryText,[id]);if(res.rows.length===0){return(0,import_response.sendResponse)(404,{message:\"Package does not exist.\"})}const packageData=res.rows[0];console.log(res.rows[0]);if(!packageData.data.Content&&!packageData.data.URL){try{const content=await(0,import_s3Service.getPackageContent)(id);packageData.data.Content=content}catch(s3Error){console.error(\"S3 Retrieval Error:\",s3Error);return(0,import_response.sendResponse)(500,{message:\"Failed to retrieve package content.\"})}}const historyInsert=`\n      INSERT INTO package_history (package_id, user_id, action)\n      VALUES ($1, $2, $3)\n    `;await import_dbService.default.query(historyInsert,[id,user.sub,\"DOWNLOAD\"]);return(0,import_response.sendResponse)(200,packageData)}catch(error){console.error(\"Retrieve Package Error:\",error);return(0,import_response.sendResponse)(500,{message:\"Internal server error.\"})}},\"handleRetrievePackage\");const handleUpdatePackage=__name(async(id,body,headers)=>{let user;try{user=(0,import_auth.authenticate)(headers)}catch(err){return(0,import_response.sendResponse)(err.statusCode,{message:err.message})}const updatedPackage=JSON.parse(body);const{metadata,data}=updatedPackage;if(metadata.ID!==id){return(0,import_response.sendResponse)(400,{message:\"Metadata ID does not match the path ID.\"})}try{const updateFields=[];const updateValues=[];let idx=1;if(data.Content){updateFields.push(`content = $${idx++}`);updateValues.push(data.Content)}else if(data.URL){updateFields.push(`url = $${idx++}`);updateValues.push(data.URL)}updateFields.push(`debloat = $${idx++}`);updateValues.push(data.debloat||false);if(data.JSProgram){updateFields.push(`js_program = $${idx++}`);updateValues.push(data.JSProgram)}updateFields.push(`updated_at = NOW()`);const updateText=`UPDATE packages SET ${updateFields.join(\", \")} WHERE id = $${idx} RETURNING *`;updateValues.push(id);const res=await import_dbService.default.query(updateText,updateValues);if(res.rows.length===0){return(0,import_response.sendResponse)(404,{message:\"Package does not exist.\"})}const updatedPkg=res.rows[0];if(data.Content){await(0,import_s3Service.uploadPackageContent)(id,data.Content)}const historyInsert=`\n      INSERT INTO package_history (package_id, user_id, action)\n      VALUES ($1, $2, $3)\n    `;await import_dbService.default.query(historyInsert,[id,user.sub,\"UPDATE\"]);return(0,import_response.sendResponse)(200,updatedPkg)}catch(error){console.error(\"Update Package Error:\",error);return(0,import_response.sendResponse)(500,{message:\"Internal server error.\"})}},\"handleUpdatePackage\");const handleDeletePackage=__name(async(id,headers)=>{let user;try{user=(0,import_auth.authenticate)(headers)}catch(err){return(0,import_response.sendResponse)(err.statusCode,{message:err.message})}try{const deleteText=\"DELETE FROM packages WHERE id = $1 RETURNING *\";const res=await import_dbService.default.query(deleteText,[id]);if(res.rows.length===0){return(0,import_response.sendResponse)(404,{message:\"Package does not exist.\"})}const deletedPackage=res.rows[0];if(deletedPackage.data.Content){await(0,import_s3Service.deletePackageContent)(id)}const historyInsert=`\n      INSERT INTO package_history (package_id, user_id, action)\n      VALUES ($1, $2, $3)\n    `;await import_dbService.default.query(historyInsert,[id,user.sub,\"DELETE\"]);return(0,import_response.sendResponse)(200,{message:\"Package is deleted.\"})}catch(error){console.error(\"Delete Package Error:\",error);return(0,import_response.sendResponse)(500,{message:\"Internal server error.\"})}},\"handleDeletePackage\");const handleListPackages=__name(async(body,headers,queryStringParameters)=>{let user={sub:5445,name:\"admin\",isAdmin:true,iat:545,exp:45};const queries=JSON.parse(body);const offset=queryStringParameters&&queryStringParameters.offset?parseInt(queryStringParameters.offset):0;const limit=10;if(!Array.isArray(queries)){return(0,import_response.sendResponse)(400,{message:\"Request body must be an array of PackageQuery.\"})}try{const results=[];for(const query of queries){const{Name,Version}=query;if(!Name){return(0,import_response.sendResponse)(400,{message:\"PackageQuery must include Name.\"})}let sql=\"SELECT * FROM packages WHERE name ILIKE $1\";const values=[`%${Name}%`];if(Version){sql+=\" AND version = $2\";values.push(Version)}const packageResult=await import_dbService.default.query(sql,values);results.push(...packageResult.rows)}const paginatedResults=results.slice(offset,offset+limit);const nextOffset=offset+limit<results.length?offset+limit:null;const responseHeaders={};if(nextOffset!==null){responseHeaders[\"offset\"]=nextOffset.toString()}return{statusCode:200,headers:responseHeaders,body:JSON.stringify(paginatedResults)}}catch(error){console.error(\"List Packages Error:\",error);if(error.message.includes(\"too many\")){return(0,import_response.sendResponse)(413,{message:\"Too many packages returned.\"})}return(0,import_response.sendResponse)(500,{message:\"Internal server error.\"})}},\"handleListPackages\");const handleResetRegistry=__name(async headers=>{let user;try{user=(0,import_auth.authenticate)(headers);if(!user.isAdmin){return(0,import_response.sendResponse)(403,{message:\"Admin privileges required.\"})}}catch(err){return(0,import_response.sendResponse)(err.statusCode,{message:err.message})}try{await import_dbService.default.query(\"TRUNCATE TABLE packages CASCADE;\");await import_dbService.default.query(\"TRUNCATE TABLE package_history CASCADE;\");return(0,import_response.sendResponse)(200,{message:\"Registry is reset.\"})}catch(error){console.error(\"Reset Registry Error:\",error);return(0,import_response.sendResponse)(500,{message:\"Internal server error.\"})}},\"handleResetRegistry\");const handleGetPackageHistoryByName=__name(async(name,headers)=>{let user;try{user=(0,import_auth.authenticate)(headers)}catch(err){return(0,import_response.sendResponse)(err.statusCode,{message:err.message})}try{const historyQuery=`\n      SELECT ph.*, u.name as user_name, u.is_admin\n      FROM package_history ph\n      JOIN packages p ON ph.package_id = p.id\n      JOIN users u ON ph.user_id = u.id\n      WHERE p.name ILIKE $1\n      ORDER BY ph.date DESC\n    `;const historyResult=await import_dbService.default.query(historyQuery,[`%${name}%`]);if(historyResult.rows.length===0){return(0,import_response.sendResponse)(404,{message:\"No such package.\"})}const historyEntries=historyResult.rows.map(entry=>({User:{name:entry.user_name,isAdmin:entry.is_admin},Date:entry.date.toISOString(),PackageMetadata:{Name:entry.name,Version:entry.version,ID:entry.package_id},Action:entry.action}));return(0,import_response.sendResponse)(200,historyEntries)}catch(error){console.error(\"Get Package History Error:\",error);return(0,import_response.sendResponse)(500,{message:\"Internal server error.\"})}},\"handleGetPackageHistoryByName\");const handleSearchPackagesByRegEx=__name(async(body,headers)=>{let user;try{user=(0,import_auth.authenticate)(headers)}catch(err){return(0,import_response.sendResponse)(err.statusCode,{message:err.message})}const{RegEx}=JSON.parse(body);if(!RegEx){return(0,import_response.sendResponse)(400,{message:\"Missing RegEx field in PackageRegEx.\"})}try{const searchQuery=`\n      SELECT * FROM packages\n      WHERE name ~* $1 OR readme ~* $1\n    `;const res=await import_dbService.default.query(searchQuery,[RegEx]);if(res.rows.length===0){return(0,import_response.sendResponse)(404,{message:\"No package found under this regex.\"})}const packages=res.rows.map(pkg=>({Version:pkg.version,Name:pkg.name,ID:pkg.id}));return(0,import_response.sendResponse)(200,packages)}catch(error){console.error(\"Search Packages Error:\",error);return(0,import_response.sendResponse)(500,{message:\"Internal server error.\"})}},\"handleSearchPackagesByRegEx\");const handleGetPackageRating=__name(async(id,headers)=>{let user;try{user=(0,import_auth.authenticate)(headers)}catch(err){return(0,import_response.sendResponse)(err.statusCode,{message:err.message})}try{const ratingQuery=\"SELECT * FROM package_ratings WHERE package_id = $1\";const res=await import_dbService.default.query(ratingQuery,[id]);if(res.rows.length===0){return(0,import_response.sendResponse)(500,{message:\"The package rating system choked on at least one of the metrics.\"})}const rating=res.rows[0];return(0,import_response.sendResponse)(200,rating)}catch(error){console.error(\"Get Package Rating Error:\",error);return(0,import_response.sendResponse)(500,{message:\"Internal server error.\"})}},\"handleGetPackageRating\");const handleGetPackageCost=__name(async(id,headers,queryStringParameters)=>{let user;try{user=(0,import_auth.authenticate)(headers)}catch(err){return(0,import_response.sendResponse)(err.statusCode,{message:err.message})}const dependency=queryStringParameters&&queryStringParameters.dependency===\"true\";try{const costQuery=`\n      SELECT p.id, p.name, p.version, p.size_mb\n      FROM packages p\n      WHERE p.id = $1\n    `;const costResult=await import_dbService.default.query(costQuery,[id]);if(costResult.rows.length===0){return(0,import_response.sendResponse)(404,{message:\"Package does not exist.\"})}const packageCosts={};let totalCost=0;const stack=[id];const visited=new Set;while(stack.length>0){const currentId=stack.pop();if(visited.has(currentId))continue;visited.add(currentId);const pkgQuery=\"SELECT * FROM packages WHERE id = $1\";const pkgResult=await import_dbService.default.query(pkgQuery,[currentId]);if(pkgResult.rows.length===0)continue;const pkg=pkgResult.rows[0];packageCosts[pkg.id]={standaloneCost:pkg.size_mb,totalCost:pkg.size_mb};totalCost+=pkg.size_mb;if(dependency){const depQuery=\"SELECT dependency_id FROM dependencies WHERE package_id = $1\";const depResult=await import_dbService.default.query(depQuery,[currentId]);depResult.rows.forEach(dep=>{if(!visited.has(dep.dependency_id)){stack.push(dep.dependency_id);totalCost+=dep.size_mb}})}}if(dependency){let cumulativeCost=0;for(const pkgId in packageCosts){cumulativeCost+=packageCosts[pkgId].standaloneCost||0;packageCosts[pkgId].totalCost=cumulativeCost}}else{packageCosts[id].totalCost=packageCosts[id].standaloneCost||0}return(0,import_response.sendResponse)(200,packageCosts)}catch(error){console.error(\"Get Package Cost Error:\",error);return(0,import_response.sendResponse)(500,{message:\"Internal server error.\"})}},\"handleGetPackageCost\");const handleGetTracks=__name(async headers=>{let user;try{user=(0,import_auth.authenticate)(headers)}catch(err){return(0,import_response.sendResponse)(err.statusCode,{message:err.message})}try{const tracksQuery=`\n      SELECT t.track_name\n      FROM user_tracks ut\n      JOIN tracks t ON ut.track_id = t.id\n      WHERE ut.user_id = $1\n    `;const res=await import_dbService.default.query(tracksQuery,[user.sub]);const plannedTracks=res.rows.map(row=>row.track_name);return(0,import_response.sendResponse)(200,{plannedTracks})}catch(error){console.error(\"Get Tracks Error:\",error);return(0,import_response.sendResponse)(500,{message:\"The system encountered an error while retrieving the student's track information.\"})}},\"handleGetTracks\");0&&(module.exports={handleAuthenticate,handleCreatePackage,handleDeletePackage,handleGetPackageCost,handleGetPackageHistoryByName,handleGetPackageRating,handleGetTracks,handleListPackages,handleResetRegistry,handleRetrievePackage,handleSearchPackagesByRegEx,handleUpdatePackage});\n})()\n","warnings":[],"map":{"version":3,"mappings":"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","names":["bcrypt","jwt","AdmZip","pool"],"ignoreList":[],"sources":["D:\\Purdue\\s1\\46100\\local\\ECE461-group32\\backend\\src\\handlers\\handlers.ts"],"sourcesContent":[null]}}