{"code":"(()=>{\n\"use strict\";var __create=Object.create;var __defProp=Object.defineProperty;var __getOwnPropDesc=Object.getOwnPropertyDescriptor;var __getOwnPropNames=Object.getOwnPropertyNames;var __getProtoOf=Object.getPrototypeOf;var __hasOwnProp=Object.prototype.hasOwnProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});var __export=(target,all)=>{for(var name in all)__defProp(target,name,{get:all[name],enumerable:true})};var __copyProps=(to,from,except,desc)=>{if(from&&typeof from===\"object\"||typeof from===\"function\"){for(let key of __getOwnPropNames(from))if(!__hasOwnProp.call(to,key)&&key!==except)__defProp(to,key,{get:()=>from[key],enumerable:!(desc=__getOwnPropDesc(from,key))||desc.enumerable})}return to};var __toESM=(mod,isNodeMode,target)=>(target=mod!=null?__create(__getProtoOf(mod)):{},__copyProps(isNodeMode||!mod||!mod.__esModule?__defProp(target,\"default\",{value:mod,enumerable:true}):target,mod));var __toCommonJS=mod=>__copyProps(__defProp({},\"__esModule\",{value:true}),mod);var handlerhelper_exports={};__export(handlerhelper_exports,{generatePackageId:()=>generatePackageId,metricCalcFromUrlUsingNetScore:()=>metricCalcFromUrlUsingNetScore});module.exports=__toCommonJS(handlerhelper_exports);var import_processURL=require(\"./rating/processURL\");var import_logger=require(\"./rating/logger\");var import_netScore=require(\"./rating/metrics/netScore\");var import_crypto=__toESM(require(\"crypto\"));const logger=(0,import_logger.getLogger)();async function metricCalcFromUrlUsingNetScore(url){const repoInfo=await(0,import_processURL.getGithubRepoInfoFromUrl)(url);logger.info(\"repoInfo:\",repoInfo);if(repoInfo==null){return null}const netScoreJSON=await(0,import_netScore.calculateNetScore)(void 0,repoInfo);if(!netScoreJSON){return null}const NetScore=netScoreJSON.NetScore;const RampUp=netScoreJSON.RampUp;const Correctness=netScoreJSON.Correctness;const BusFactor=netScoreJSON.BusFactor;const ResponsiveMaintainer=netScoreJSON.ResponsiveMaintainer;const License=netScoreJSON.License;const pullRequestsScore=1;const pinnedDependenciesScore=1;const currentRepoInfoScores={ID:\"\",NAME:repoInfo.repo,OWNER:repoInfo.owner,VERSION:\"1.0.0\",URL:repoInfo.url,NET_SCORE:NetScore,RAMP_UP_SCORE:RampUp,CORRECTNESS_SCORE:Correctness,BUS_FACTOR_SCORE:BusFactor,RESPONSIVE_MAINTAINER_SCORE:ResponsiveMaintainer,LICENSE_SCORE:License,PULL_REQUESTS_SCORE:pullRequestsScore,PINNED_DEPENDENCIES_SCORE:pinnedDependenciesScore};return currentRepoInfoScores}__name(metricCalcFromUrlUsingNetScore,\"metricCalcFromUrlUsingNetScore\");const generatePackageId=__name((name,version)=>{console.log(`Generating id for ${name}@${version}`);const randomBytes=import_crypto.default.randomBytes(8);let id=BigInt(`0x${randomBytes.toString(\"hex\")}`);const maxBigInt=BigInt(\"9223372\");id=id%maxBigInt;console.log(`Generated package id ${id.toString()} for ${name}@${version}`);return id.toString()},\"generatePackageId\");0&&(module.exports={generatePackageId,metricCalcFromUrlUsingNetScore});\n})()\n","warnings":[],"map":{"version":3,"mappings":";8/BAAA,kPAAyC,+BACzC,kBAAwC,2BACxC,oBAAkC,qCAClC,kBAAmB,2BAkBnB,MAAM,UAAS,yBAAU,EAEzB,eAAsB,+BAA+B,IAA0C,CAC3F,MAAM,SAAW,QAAM,4CAAyB,GAAG,EACnD,OAAO,KAAK,YAAa,QAAQ,EACjC,GAAI,UAAY,KAAM,CACpB,OAAO,IACT,CAGA,MAAM,aAAe,QAAM,mCAAkB,OAAU,QAAQ,EAC/D,GAAI,CAAC,aAAc,CACjB,OAAO,IACT,CAEA,MAAM,SAAW,aAAa,SAC9B,MAAM,OAAS,aAAa,OAC5B,MAAM,YAAc,aAAa,YACjC,MAAM,UAAY,aAAa,UAC/B,MAAM,qBAAuB,aAAa,qBAC1C,MAAM,QAAU,aAAa,QAK7B,MAAM,kBAAoB,EAC1B,MAAM,wBAA0B,EAEhC,MAAM,sBAAqC,CACzC,GAAI,GACJ,KAAM,SAAS,KACf,MAAO,SAAS,MAChB,QAAS,QACT,IAAK,SAAS,IACd,UAAW,SACX,cAAe,OACf,kBAAmB,YACnB,iBAAkB,UAClB,4BAA6B,qBAC7B,cAAe,QACf,oBAAqB,kBACrB,0BAA2B,uBAC7B,EAEA,OAAO,qBACT,CA3CoB,wEA8Cb,MAAM,kBAAoB,QAAC,KAAc,UAA4B,CAC1E,QAAQ,IAAI,qBAAqB,IAAI,IAAI,OAAO,EAAE,EAGlD,MAAM,YAAc,cAAAA,QAAO,YAAY,CAAC,EACxC,IAAI,GAAK,OAAO,KAAK,YAAY,SAAS,KAAK,CAAC,EAAE,EAGlD,MAAM,UAAY,OAAO,SAAS,EAClC,GAAK,GAAK,UAEV,QAAQ,IAAI,wBAAwB,GAAG,SAAS,CAAC,QAAQ,IAAI,IAAI,OAAO,EAAE,EAC1E,OAAO,GAAG,SAAS,CACvB,EAbmC","names":["crypto"],"ignoreList":[],"sources":["D:\\Purdue\\s1\\46100\\local\\ECE461-group32\\backend\\src\\handlerhelper.ts"],"sourcesContent":[null]}}