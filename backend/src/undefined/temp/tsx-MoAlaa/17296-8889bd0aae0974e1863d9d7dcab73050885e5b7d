{"code":"(()=>{\n\"use strict\";var __create=Object.create;var __defProp=Object.defineProperty;var __getOwnPropDesc=Object.getOwnPropertyDescriptor;var __getOwnPropNames=Object.getOwnPropertyNames;var __getProtoOf=Object.getPrototypeOf;var __hasOwnProp=Object.prototype.hasOwnProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});var __export=(target,all)=>{for(var name in all)__defProp(target,name,{get:all[name],enumerable:true})};var __copyProps=(to,from,except,desc)=>{if(from&&typeof from===\"object\"||typeof from===\"function\"){for(let key of __getOwnPropNames(from))if(!__hasOwnProp.call(to,key)&&key!==except)__defProp(to,key,{get:()=>from[key],enumerable:!(desc=__getOwnPropDesc(from,key))||desc.enumerable})}return to};var __toESM=(mod,isNodeMode,target)=>(target=mod!=null?__create(__getProtoOf(mod)):{},__copyProps(isNodeMode||!mod||!mod.__esModule?__defProp(target,\"default\",{value:mod,enumerable:true}):target,mod));var __toCommonJS=mod=>__copyProps(__defProp({},\"__esModule\",{value:true}),mod);var util_exports={};__export(util_exports,{cloneRepo:()=>cloneRepo,isValidFilePath:()=>isValidFilePath,validateGithubToken:()=>validateGithubToken});module.exports=__toCommonJS(util_exports);var import_simple_git=require(\"simple-git\");var import_path=__toESM(require(\"path\"));var import_promises=__toESM(require(\"fs/promises\"));var import_logger=require(\"./logger\");var import_graphqlClient=require(\"./graphqlClient\");const logger=(0,import_logger.getLogger)();async function cloneRepo(repoUrl,repoName){if(!isValidFilePath(repoName)){logger.info(\"Invalid file path\");return null}const git=(0,import_simple_git.simpleGit)();const repoDir=import_path.default.resolve(__dirname,\"..\",\"repos\",repoName);try{await import_promises.default.mkdir(repoDir,{recursive:true});await git.clone(repoUrl,repoDir);logger.info(`Repository cloned to ${repoDir}`);return repoDir}catch(error){if(error.message.includes(\"already exists\")){logger.info(`Repository already cloned to ${repoDir}`);return repoDir}logger.info(\"Error cloning repository:\",error);return null}}__name(cloneRepo,\"cloneRepo\");function isValidFilePath(filePath){const resolvedPath=import_path.default.resolve(filePath);return import_path.default.isAbsolute(resolvedPath)&&!filePath.includes(\"..\")}__name(isValidFilePath,\"isValidFilePath\");const validateGithubToken=__name(async()=>{const logger2=(0,import_logger.getLogger)();const validateTokenQuery=`\n    query {\n      viewer {\n        login\n      }\n    }\n  `;try{const response=await import_graphqlClient.graphqlClient.request(validateTokenQuery);if(response.viewer.login){logger2.info(\"GitHub token is valid\");return true}else{logger2.info(\"GitHub token is invalid\")}}catch(error){logger2.info(\"Error validating GitHub token:\",error)}return false},\"validateGithubToken\");0&&(module.exports={cloneRepo,isValidFilePath,validateGithubToken});\n})()\n","warnings":[],"map":{"version":3,"mappings":";8/BAAA,+LAGA,sBAAqC,sBACrC,gBAAiB,yBAEjB,oBAAe,gCACf,kBAA0B,oBAC1B,yBAA8B,2BAE9B,MAAM,UAAS,yBAAU,EAQzB,eAAsB,UAAU,QAAiB,SAA0C,CACzF,GAAI,CAAC,gBAAgB,QAAQ,EAAG,CAC9B,OAAO,KAAK,mBAAmB,EAC/B,OAAO,IACT,CACA,MAAM,OAAiB,6BAAU,EACjC,MAAM,QAAU,YAAAA,QAAK,QAAQ,UAAW,KAAM,QAAS,QAAQ,EAC/D,GAAI,CAEF,MAAM,gBAAAC,QAAG,MAAM,QAAS,CAAE,UAAW,IAAK,CAAC,EAC3C,MAAM,IAAI,MAAM,QAAS,OAAO,EAChC,OAAO,KAAK,wBAAwB,OAAO,EAAE,EAC7C,OAAO,OACT,OAAS,MAAO,CACd,GAAK,MAAgB,QAAQ,SAAS,gBAAgB,EAAG,CACvD,OAAO,KAAK,gCAAgC,OAAO,EAAE,EACrD,OAAO,OACT,CACA,OAAO,KAAK,4BAA6B,KAAK,EAC9C,OAAO,IACT,CACF,CArBsB,8BA4Bf,SAAS,gBAAgB,SAA2B,CAEzD,MAAM,aAAe,YAAAD,QAAK,QAAQ,QAAQ,EAC1C,OAAO,YAAAA,QAAK,WAAW,YAAY,GAAK,CAAC,SAAS,SAAS,IAAI,CACjE,CAJgB,0CAUT,MAAM,oBAAsB,gBAA8B,CAC/D,MAAME,WAAS,yBAAU,EACzB,MAAM,mBAAqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAO3B,GAAI,CACF,MAAM,SAA0C,MAAM,mCAAc,QAAQ,kBAAkB,EAC9F,GAAI,SAAS,OAAO,MAAO,CACzBA,QAAO,KAAK,uBAAuB,EACnC,MAAO,KACT,KAAO,CACLA,QAAO,KAAK,yBAAyB,CACvC,CACF,OAAS,MAAO,CACdA,QAAO,KAAK,iCAAkC,KAAK,CACrD,CACA,MAAO,MACT,EArBmC","names":["path","fs","logger"],"ignoreList":[],"sources":["D:\\Purdue\\s1\\46100\\local\\ECE461-group32\\backend\\src\\rating\\util.ts"],"sourcesContent":[null]}}