{"code":"(()=>{\n\"use strict\";var __defProp=Object.defineProperty;var __getOwnPropDesc=Object.getOwnPropertyDescriptor;var __getOwnPropNames=Object.getOwnPropertyNames;var __hasOwnProp=Object.prototype.hasOwnProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});var __export=(target,all)=>{for(var name in all)__defProp(target,name,{get:all[name],enumerable:true})};var __copyProps=(to,from,except,desc)=>{if(from&&typeof from===\"object\"||typeof from===\"function\"){for(let key of __getOwnPropNames(from))if(!__hasOwnProp.call(to,key)&&key!==except)__defProp(to,key,{get:()=>from[key],enumerable:!(desc=__getOwnPropDesc(from,key))||desc.enumerable})}return to};var __toCommonJS=mod=>__copyProps(__defProp({},\"__esModule\",{value:true}),mod);var correctness_exports={};__export(correctness_exports,{calculateCorrectness:()=>calculateCorrectness});module.exports=__toCommonJS(correctness_exports);var import_eslint=require(\"eslint\");var import_logger=require(\"../logger\");const logger=(0,import_logger.getLogger)();async function calculateCorrectness(repoDir,totalLines){if(!repoDir){logger.info(\"Could not calculate correctness score: No repository directory provided\");return 0}const eslintScore=await calculateESLintScore(repoDir,totalLines);return eslintScore}__name(calculateCorrectness,\"calculateCorrectness\");async function calculateESLintScore(repoDir,totalLines){try{const eslint=new import_eslint.ESLint({ignore:false});const results=await eslint.lintFiles([`${repoDir}/**/*.{js,ts,tsx}`]);let totalErrors=0;let totalWarnings=0;for(const result of results){totalErrors+=result.errorCount;totalWarnings+=result.warningCount}if(totalLines===0){logger.debug(`No lines of code found in ${repoDir}`);return 0}const eslintScore=Math.max(0,Math.min(1,1-(2*totalErrors+totalWarnings)/totalLines));logger.debug(`ESLint errors: ${totalErrors}, warnings: ${totalWarnings}, total lines: ${totalLines}, final score: ${eslintScore} for ${repoDir}`);return eslintScore}catch(error){logger.info(`Failed to calculate ESLint score: ${error}`);return 0}}__name(calculateESLintScore,\"calculateESLintScore\");0&&(module.exports={calculateCorrectness});\n})()\n","warnings":[],"map":{"version":3,"mappings":";mvBAAA,0JAGA,kBAAuB,kBACvB,kBAA0B,qBAE1B,MAAM,UAAS,yBAAU,EAOzB,eAAsB,qBAAqB,QAAwB,WAAqC,CACtG,GAAI,CAAC,QAAS,CACZ,OAAO,KAAK,yEAAyE,EACrF,MAAO,EACT,CACA,MAAM,YAAc,MAAM,qBAAqB,QAAS,UAAU,EAClE,OAAO,WACT,CAPsB,oDAetB,eAAe,qBAAqB,QAAiB,WAAqC,CACxF,GAAI,CACF,MAAM,OAAS,IAAI,qBAAO,CAAE,OAAQ,KAAM,CAAC,EAC3C,MAAM,QAAU,MAAM,OAAO,UAAU,CAAC,GAAG,OAAO,mBAAmB,CAAC,EAEtE,IAAI,YAAc,EAClB,IAAI,cAAgB,EACpB,UAAW,UAAU,QAAS,CAC5B,aAAe,OAAO,WACtB,eAAiB,OAAO,YAC1B,CAEA,GAAI,aAAe,EAAG,CACpB,OAAO,MAAM,6BAA6B,OAAO,EAAE,EACnD,MAAO,EACT,CAEA,MAAM,YAAc,KAAK,IAAI,EAAG,KAAK,IAAI,EAAG,GAAK,EAAI,YAAc,eAAiB,UAAU,CAAC,EAC/F,OAAO,MACL,kBAAkB,WAAW,eAAe,aAAa,kBAAkB,UAAU,kBAAkB,WAAW,QAAQ,OAAO,EACnI,EACA,OAAO,WACT,OAAS,MAAO,CACd,OAAO,KAAK,qCAAqC,KAAK,EAAE,EACxD,MAAO,EACT,CACF,CA1Be","names":[],"ignoreList":[],"sources":["D:\\Purdue\\s1\\46100\\local\\ECE461-group32\\backend\\src\\rating\\metrics\\correctness.ts"],"sourcesContent":[null]}}